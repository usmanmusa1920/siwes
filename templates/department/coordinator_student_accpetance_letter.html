<!-- extending from base.html file -->
{% extends 'base.html' %}
{% load static %}

<!-- css file link -->
{% block css %}
  <link rel="stylesheet" href="{% static 'css/profile.css' %}">
{% endblock css %}

<!-- page title -->
{% block title %}
  <title>Student list that uploaded acceptance letter</title>
{% endblock title %}

<!-- content of the page -->
{% block main %}
  <div class="main_wrapp_head">
    <p>Student that upload acceptance letter ({{students_letters.paginator.count}})</p>
  </div>

  <div class="main_wrapp">
    {% if students_letters %}
      {%  for student in students_letters %}
        <div class="wrapp_list">
          <a href="{% url 'auth:general_profile' student.sender.matrix_no %}">
            {{student.sender.first_name}}
            {% if usr.middle_name %}
              {{student.sender.middle_name}}
            {% endif %}
            {{student.sender.last_name}}
          </a>
          <small>{{student.level}} level student</small>
          {% if student.is_reviewed %}
            <form method="post">
              {% csrf_token %}
              <button type="button">Viewed</button>
            </form>
          {% else %}
            <form action="{% url 'department:training_coordinator_view_student_letter' student.id %}" method="post">
              {% csrf_token %}
              <button type="submit">View</button>
            </form>
          {% endif %}
        </div>
      {% endfor %}

      {% if students_letters.paginator.count > 10 %}
        <div class="wrapp_pages">
          <div class="wrapp_pages_column">
            {% if students_letters.has_previous %}
              <a href="?page={{students_letters.previous_page_number}}" class="surf">previous</a>
              <a>...</a>
            {% endif %}

            {% for num in students_letters.paginator.page_range %}
              {% if students_letters.number == num %}
                  <a href="?page={{num}}" class="current">{{num}}</a>
              {% elif num > students_letters.number|add:'-4' and num < students_letters.number|add:'4' %}
                  <a href="?page={{num}}" class="page_link">{{num}}</a>
              {% endif %}
            {% endfor %}

            {% if students_letters.has_next %}
              <a>...</a>
              <a href="?page={{students_letters.next_page_number}}" class="surf">Next</a>
            {% endif %}
          </div>
        </div>
      {% endif %}
    {% else %}
      <div class="main_wrapp">
        <div class="wrapp_form">
          <div class="wrapp_body">
            <div class="wrapp_null">
              <div class="wrapp_in_null">
                <div class="main_wrapp_null">
                  <p>You have no student that upload letter in this session!</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    {% endif %}
  </div>
{% endblock main %}
